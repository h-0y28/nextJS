## Server component VS Client compoent

![alt text](image.png)

- ë¦¬ì•¡íŠ¸ê°€ 18ë²„ì „ë¶€í„° ì´ë ‡ê²Œ ì„œë²„ ì»´í¼ë„ŒíŠ¸ë¼ëŠ” ê°œë…ì´ ì¶”ê°€ê°€ ë¨ â† ì´ê±¸ next.jsê°€ ê°€ì ¸ì˜´
- **Next.jsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¼ê³  ê°„ì£¼í•¨â­â­**

![alt text](image-1.png)
s = ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ”ë° ì‚¬ìš©ìì™€ëŠ” **ìƒí˜¸ì‘ìš© X** â‡’ **ì„œë²„ ì»´í¬ë„ŒíŠ¸**ë¡œ ë§Œë“œëŠ” ê²ƒì´ ìœ ë¦¬í•¨
c = ìƒí˜¸ì‘ìš© O â‡’ í•´ë‹¹ ë¶€ë¶„**ë§Œ** **ìƒˆ**ë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ì„œ **í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸**ë¡œ ë§Œë“œëŠ” ê²ƒì´ ë” ìœ ë¦¬í•¨

### ì •ë¦¬

- user ìƒí˜¸ì‘ìš© O â‡’ client
- user ìƒí˜¸ì‘ìš© X â‡’ server

---

![alt text](image-2.png)
â—error ë°œìƒ
![alt text](image-3.png)
ê¸°ë³¸ì ìœ¼ë¡œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¡œ ê°„ì£¼í•´ì„œ!!

### í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¡œ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´?

ì½”ë“œ ìœ„ìª½ì— ì‘ì„±í•˜ê¸° â­

```
"use client"
```

![alt text](imgs/under.png)
í•˜ì§€ë§Œ ì—ëŸ¬ ë°œìƒ â—
![alt text](image-4.png)
**ì™œ?**
â‡’ `metadata`ê°€ **server component**ë¼ì„œ

```
export const metadata = {
  title: "Web tutorials",
  description: "Generated by create next app",
};
```

ì´ ë¶€ë¶„ì„ ì£¼ì„ ì²˜ë¦¬í•˜ë©´ errorê°€ ì‚¬ë¼ì§€ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŒ

ê·¸ë¦¬ê³  ì•„ë˜ ì½”ë“œë¥¼ ì´ìš©í•˜ê¸°

```js
<ol>
  {topics.map((topic) => {
    return (
      <li key={topic.id}>
        <Link href={"/read/${topci.id}"}>{topic.title}</Link>
      </li>
    );
  })}
</ol>
```

---

### ì•„ì‰¬ìš´ ì  !

ğŸš« If, ì„œë²„ê°€ ì‹±ê°€í¬ë¥´ì— ìˆê³  ìš°ë¦¬ê°€ ì„œìš¸ì— ìˆë‹¤ë©´?
useEffectë¥¼ ì´ìš©í•œ ë°ì´í„° fetching
= serverì—ì„œ clientë¡œ ë°ì´í„°ë¥¼ ë•¡ê²¨ì˜´
â‡’ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° **ì‹œê°„ ì†Œëª¨ â†‘â†‘â†‘**

ğŸš«JSê°€ êº¼ì§„ë‹¤ë©´?
ì •ì ì¸ ë‚´ìš©ì€ ì˜ ë³´ì„
**ì„œë²„ì™€ í†µì‹ í•˜ëŠ” ë¶€ë¶„ì€(useEffect) ì‹¤í–‰X**

ğŸš«If, DBì— ì ‘ì†í•œë‹¤ë©´?
DB ID, Password ë…¸ì¶œ ë¨ !!
= ë³´ì•ˆì ì¸ ë¬¸ì œ ë°œìƒ

---

### How to solve?

1. server componentë¡œ ë°”ê¾¸ì–´ë¼

```
"use client"
```

ì´ ë¶€ë¶„ ì‚­ì œ

2. fuctionì„ `async`ë¡œ ì„ ì–¸

```js
export default async function RootLayout() {
  // code
}
```

3. await

```js
const resp = await fetch("http://localhost:9999/topics");
const topics = await resp.json();
```

> metadataë„ ì´ì œ ì‚¬ìš© ê°€ëŠ¥

â‡’ server componentëŠ” serverìª½ì—ì„œ fetch methodê°€ í˜¸ì¶œë˜ê³ , ì–˜ê°€ ëë‚  ë•Œê¹Œì§€ await ê¸°ë‹¤ë¦¬ê³ , ëë‚˜ë©´ json()ìœ¼ë¡œ ë°”ê¾¸ë¼ëŠ” ëª…ë ¹ì´ ì „ë‹¬ë˜ë©´ì„œ topic ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ê·¸ ë°ì´í„°ë¡œ ê¸€ ëª©ë¡ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•œ ë‹¤ìŒì— ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ê²°ê³¼ë¥¼ serverìª½ì—(.nextí´ë”) ì €ì¥í•´ ë†“ê³  ê·¸ ìµœì¢…ì ì¸ ì •ì ì¸ ë‚´ìš©ë§Œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•œë‹¤.
ì´ë•Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë‚˜ ì´ëŸ°ê²ƒë“¤ì€ ë¹¼ê³  ì „ì†¡í•œë‹¤.

### ì¥ì 

1. ì ì€ ìš©ëŸ‰
2. ìš°ë¦¬ê°€ ì ‘ê·¼í•˜ê³  ìˆëŠ” ì„œë²„ê°€ ê°™ì€ ì„œë²„ì— ìˆëŠ” ì£¼ì†Œë¼ë©´ -> ë¹ ë¥¸ ì´ë™ì‘ì´ ëë‚¨
3. ì„œë²„ ìª½ì—ì„œ ë Œë”ë§ì„ ëë‚´ê³  ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ë•Œë¬¸ì— JSê°€ êº¼ì ¸ë„ ì˜ ë™ì‘í•œë‹¤(ì„œë²„ìª½ì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±í•œ ì •ì ì¸ ë‚´ìš©ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬í–ˆê¸° ë•Œë¬¸)

---

## ê¸€ ì½ê¸°

```js
export default async function Read(props) {
  try {
    const resp = await fetch(`http://localhost:9999/topics/${props.params.id}`);

    // ì‘ë‹µì´ ì„±ê³µí–ˆëŠ”ì§€ í™•ì¸
    if (!resp.ok) {
      const errorMessage = await resp.text(); // ì‹¤íŒ¨í•œ ì‘ë‹µì„ í…ìŠ¤íŠ¸ë¡œ ì½ìŒ
      throw new Error(`Fetch error: ${errorMessage}`);
    }

    const topic = await resp.json(); // ì„±ê³µí–ˆì„ ë•Œë§Œ JSON íŒŒì‹±

    return (
      <>
        <h2>{topic.title}</h2>
        <p>{topic.body}</p>
      </>
    );
  } catch (error) {
    console.error("Fetch error:", error);
    return <p>ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {error.message}</p>;
  }
}
```
